# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

parameters:
- name: token
  displayName: Stark token
  type: string
  default: ''

trigger:
- none

pool:
  vmImage: ubuntu-latest

steps:
- script: |
    npm i
    npm run dev &
  displayName: "Build and run server"
- task: StarkAccessibilityAudit@0
  inputs:
    token: '${{ parameters.token }}'
    waitTime: 5000
    urls: |
      http://localhost:3000
      http://localhost:3000/foo